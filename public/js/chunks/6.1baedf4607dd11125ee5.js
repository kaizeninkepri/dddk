(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{0:function(t,a){},"0Kab":function(t,a,e){"use strict";e("67Vz")},"0eSQ":function(t,a,e){(t.exports=e("I1BE")(!1)).push([t.i,".vs-input {\n  width: 100%;\n}[dir] .vs-input {\n  margin-top: 10px;\n}\n",""])},1:function(t,a){},2:function(t,a){},"67Vz":function(t,a,e){var r=e("0eSQ");"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(r,s);r.locals&&(t.exports=r.locals)},Ez7d:function(t,a,e){"use strict";e.r(a);var r=e("Ye0E"),s=e("ta7f"),i=e("qjld"),n=e("vDqi"),o={components:{ImportExcel:i.a},data:function(){return{page:{submitType:"InsertByForm"},tabsActive:0,colorx:"#1978c3",form:{opdi_id:null,nama_izin:null,kategori:null,biaya:null,masakerja:null,aktif:!0,distrik_id:this.$route.query.v,persyaratan:[{persyaratan:"",aktif:!0},{persyaratan:"",aktif:!0},{persyaratan:"",aktif:!0}]}}},validations:function(){return{form:{nama_izin:{required:s.required},kategori:{required:s.required},masakerja:{required:s.required},persyaratan:{$each:{persyaratan:{required:s.required}}}}}},mounted:function(){this.$route.query.p&&(this.page.submitType="UpdateById",this.getIzin())},methods:{DeleteFormPersyaratan:function(t){this.$delete(this.form.persyaratan,t)},AddFormPersyaratan:function(){this.form.persyaratan.push({persyaratan:null,aktif:!0})},postToDatabase:function(){var t=this;this.$v.$touch(),this.$v.$invalid||n.post(r.a.api+"/layanan/izin",{type:this.page.submitType,data:this.form}).then((function(a){t.$vs.notify({color:"success",title:a.data.title,text:a.data.text}),t.$router.push({name:"distrik-detail",query:{v:t.form.distrik_id}})})).catch((function(t){console.log(t)}))},loadDataInTable:function(t){var a=t.results;t.header,t.meta;this.form.persyaratan=a,this.form.nama_izin=this.form.persyaratan[0].nama_izin,this.form.kategori=this.form.persyaratan[0].kategori,this.form.masakerja=this.form.persyaratan[0].masakerja,this.tabsActive=0},getIzin:function(){var t=this;n.post(r.a.api+"/layanan/izin",{type:"dataById",id:this.$route.query.p}).then((function(a){t.form=a.data})).catch((function(t){console.log(t)}))}}},l=(e("0Kab"),e("KHd+")),c=Object(l.a)(o,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("vx-card",{staticClass:"pd-5"},[e("div",{staticClass:"flex flex-wrap -mx-3 mb-6"},[e("div",{staticClass:"w-full md:w-1/3 px-3 mb-6 md:mb-0"},[e("label",{staticClass:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",attrs:{for:"grid-first-name"}},[t._v("\n          Nama Izin\n        ")]),t._v(" "),e("vs-input",{attrs:{danger:t.$v.form.nama_izin.$error},model:{value:t.$v.form.nama_izin.$model,callback:function(a){t.$set(t.$v.form.nama_izin,"$model","string"==typeof a?a.trim():a)},expression:"$v.form.nama_izin.$model"}}),t._v(" "),t.$v.form.nama_izin.$anyError?e("div",[t.$v.form.nama_izin.required?t._e():e("span",{staticClass:"text-xs text-danger"},[t._v("required")])]):t._e()],1),t._v(" "),e("div",{staticClass:"w-full md:w-1/6 px-3"},[e("label",{staticClass:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",attrs:{for:"grid-last-name"}},[t._v("\n          kategori\n        ")]),t._v(" "),e("vs-select",{staticClass:"selectExample mt-2",attrs:{danger:t.$v.form.kategori.$error},model:{value:t.$v.form.kategori.$model,callback:function(a){t.$set(t.$v.form.kategori,"$model","string"==typeof a?a.trim():a)},expression:"$v.form.kategori.$model"}},[e("vs-select-item",{attrs:{value:"perizinan",text:"perizinan"}}),t._v(" "),e("vs-select-item",{attrs:{value:"nonperizinan",text:"nonperizinan"}})],1)],1),t._v(" "),e("div",{staticClass:"w-full md:w-1/6 px-3"},[e("label",{staticClass:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",attrs:{for:"grid-first-name"}},[t._v("\n          Masa Kerja\n        ")]),t._v(" "),e("vs-input",{attrs:{danger:t.$v.form.masakerja.$error},model:{value:t.$v.form.masakerja.$model,callback:function(a){t.$set(t.$v.form.masakerja,"$model","string"==typeof a?a.trim():a)},expression:"$v.form.masakerja.$model"}}),t._v(" "),t.$v.form.masakerja.$anyError?e("div",[t.$v.form.masakerja.required?t._e():e("span",{staticClass:"text-xs text-danger"},[t._v("required")])]):t._e()],1),t._v(" "),e("div",{staticClass:"w-full md:w-1/6 px-3"},[e("label",{staticClass:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",attrs:{for:"grid-last-name"}}),t._v(" "),e("vs-switch",{staticClass:"mt-8",model:{value:t.form.aktif,callback:function(a){t.$set(t.form,"aktif",a)},expression:"form.aktif"}},[e("span",{attrs:{slot:"on"},slot:"on"},[t._v("Aktif")]),t._v(" "),e("span",{attrs:{slot:"off"},slot:"off"},[t._v("Tidak Aktif")])])],1)])]),t._v(" "),e("vx-card",{staticClass:"mt-2"},[e("vs-divider",[t._v(" Persyaratan ")]),t._v(" "),e("vs-tabs",{attrs:{alignment:"center",color:t.colorx},model:{value:t.tabsActive,callback:function(a){t.tabsActive=a},expression:"tabsActive"}},[e("vs-tab",{attrs:{label:"Formulir"},on:{click:function(a){t.colorx="#1978c3"}}},[e("table",{staticClass:"table-auto"},[e("thead",[e("tr",[e("th",{staticClass:"px-4 py-2"},[t._v("No")]),t._v(" "),e("th",{staticClass:"w-full px-4 py-2"},[t._v("Persyaratan")]),t._v(" "),e("th",{staticClass:"w-1/3 px-4 py-2"},[t._v("Aksi")])])]),t._v(" "),e("tbody",t._l(t.$v.form.persyaratan.$each.$iter,(function(a,r){return e("tr",{key:r},[e("td",{staticClass:"border px-4 py-2"},[t._v(t._s(parseInt(r)+1))]),t._v(" "),e("td",{staticClass:"border px-4 py-2"},[e("vs-input",{attrs:{danger:a.persyaratan.$error},model:{value:a.persyaratan.$model,callback:function(e){t.$set(a.persyaratan,"$model","string"==typeof e?e.trim():e)},expression:"p.persyaratan.$model"}})],1),t._v(" "),e("td",{staticClass:"border px-4 py-2"},[t.form.persyaratan.length>1?e("vs-button",{attrs:{color:"danger",type:"border",icon:"delete_outline"},on:{click:function(a){return t.DeleteFormPersyaratan(r)}}}):t._e()],1)])})),0)]),t._v(" "),e("center",[e("vs-button",{attrs:{color:"primary",type:"border",icon:"playlist_add"},on:{click:function(a){return t.AddFormPersyaratan()}}},[t._v("Tambah persyaratan")])],1)],1),t._v(" "),e("vs-tab",{attrs:{label:"Import Via Exel"},on:{click:function(a){t.colorx="#FFA500"}}},[e("center",[e("import-excel",{attrs:{onSuccess:t.loadDataInTable}}),t._v(" "),e("vs-button",{staticClass:"mt-10",attrs:{color:"warning",icon:"file_copy"},on:{click:function(a){return t.AddFormPersyaratan()}}},[t._v("Template")])],1)],1)],1)],1),t._v(" "),e("vx-card",{staticClass:"mt-2"},[e("vs-row",{attrs:{"vs-w":"12"}},[e("vs-col",{attrs:{"vs-type":"flex","vs-offset":"8","vs-justify":"right","vs-align":"right","vs-lg":"5","vs-sm":"5"}},[e("vs-button",{attrs:{color:"primary",icon:"save_alt"},on:{click:function(a){return t.postToDatabase()}}},[t._v("Simpan")])],1)],1)],1)],1)}),[],!1,null,null,null);a.default=c.exports},Ye0E:function(t,a,e){"use strict";a.a={api:"http://localhost/project/starter-kit/api",base:"project/starter-kit",web:"http://localhost/project/starter-kit",assets:"http://localhost/project/starter-kit",publicData:"http://localhost/project/starter-kit"}},qjld:function(t,a,e){"use strict";var r=e("EUZL"),s=e.n(r),i={props:{onSuccess:{type:Function,required:!0}},data:function(){return{excelData:{header:null,results:null,meta:null}}},methods:{generateData:function(t){var a=t.header,e=t.results,r=t.meta;this.excelData.header=a,this.excelData.results=e,this.excelData.meta=r,this.onSuccess&&this.onSuccess(this.excelData)},getHeaderRow:function(t){var a,e=[],r=s.a.utils.decode_range(t["!ref"]),i=r.s.r;for(a=r.s.c;a<=r.e.c;++a){var n=t[s.a.utils.encode_cell({c:a,r:i})],o="UNKNOWN "+a;n&&n.t&&(o=s.a.utils.format_cell(n)),e.push(o)}return e},handleDragover:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleDrop:function(t){t.stopPropagation(),t.preventDefault();var a=t.dataTransfer.files;if(1===a.length){var e=a[0];if(!this.isExcel(e))return this.$vs.notify({title:"Login Attempt",text:"Only supports upload .xlsx, .xls, .csv suffix files",iconPack:"feather",icon:"icon-alert-circle",color:"warning"}),!1;this.uploadFile(e)}else this.$vs.notify({title:"Login Attempt",text:"Only support uploading one file!",iconPack:"feather",icon:"icon-alert-circle",color:"warning"})},readerData:function(t){var a=this;return new Promise((function(e){var r=new FileReader;r.onload=function(t){var r=t.target.result,i=s.a.read(r,{type:"array"}),n=i.SheetNames[0],o=i.Sheets[n],l=a.getHeaderRow(o),c=s.a.utils.sheet_to_json(o),u={sheetName:n};a.generateData({header:l,results:c,meta:u}),e()},r.readAsArrayBuffer(t)}))},handleClick:function(t){var a=t.target.files[0];a&&this.uploadFile(a)},isExcel:function(t){return/\.(xlsx|xls|csv)$/.test(t.name)},uploadFile:function(t){this.$refs.fileInput.value=null,this.readerData(t)}}},n=e("KHd+"),o=Object(n.a)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"excel-import"},[e("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:t.handleClick}}),t._v(" "),e("div",{staticClass:"px-8 py-16 cursor-pointer text-center border-2 border-dashed d-theme-border-grey-light d-theme-dark-bg text-xl",on:{click:function(a){return t.$refs.fileInput.click()},drop:t.handleDrop,dragover:t.handleDragover,dragenter:t.handleDragover}},[e("feather-icon",{staticClass:"block",attrs:{icon:"UploadCloudIcon",svgClasses:"h-16 w-16 stroke-current text-grey"}}),t._v(" "),e("span",[t._v("Drop Excel File or ")]),t._v(" "),e("span",{staticClass:"font-medium text-primary",on:{click:function(a){return a.stopPropagation(),t.$refs.fileInput.click()}}},[t._v("Browse")])],1)])}),[],!1,null,null,null);a.a=o.exports}}]);